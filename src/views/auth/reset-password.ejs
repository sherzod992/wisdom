<%- include('../includes/header') %>
    <link rel="stylesheet" type="text/css" href="/css/signup.css" />

    <body>
        <div class="container">
            <div class="forms-container">
                <div class="signin-signup">

                    <% if (token) { %>
                        <!-- 비밀번호 재설정 폼 -->
                        <form action="/auth/reset-password/<%= token %>" method="POST" class="sign-in-form">
                            <h2 class="title">비밀번호 재설정</h2>

                            <% if (error) { %>
                                <div class="error-message"
                                    style="color: #ff4757; margin-bottom: 15px; text-align: center;">
                                    <%= error %>
                                </div>
                                <% } %>

                                    <% if (success) { %>
                                        <div class="success-message"
                                            style="color: #2ed573; margin-bottom: 15px; text-align: center;">
                                            <%= success %>
                                                <br><br>
                                                <a href="/admin/signup"
                                                    style="color: #5e72e4; text-decoration: underline;">로그인 페이지로 이동</a>
                                        </div>
                                        <% } else { %>
                                            <div class="input-field">
                                                <i class="fas fa-lock"></i>
                                                <input type="password" name="newPassword" placeholder="새 비밀번호" required
                                                    minlength="4" />
                                            </div>
                                            <div class="input-field">
                                                <i class="fas fa-lock"></i>
                                                <input type="password" name="confirmPassword" placeholder="비밀번호 확인"
                                                    required minlength="4" />
                                            </div>
                                            <input type="submit" value="비밀번호 변경" class="btn solid" />
                                            <% } %>
                        </form>
                        <% } else { %>
                            <!-- 에러 메시지만 표시 -->
                            <div class="sign-in-form" style="text-align: center;">
                                <h2 class="title">비밀번호 재설정</h2>
                                <div class="error-message" style="color: #ff4757; margin-bottom: 15px;">
                                    <%= error || '유효하지 않은 요청입니다.' %>
                                </div>
                                <a href="/admin/signup" class="btn solid"
                                    style="display: inline-block; text-decoration: none; margin-top: 20px;">
                                    로그인 페이지로 돌아가기
                                </a>
                            </div>
                            <% } %>

                </div>
            </div>

            <div class="panels-container">
                <div class="panel left-panel">
                    <div class="content">
                        <h3>보안을 위해</h3>
                        <p>강력한 비밀번호를 설정해주세요!</p>
                    </div>
                    <img src="https://i.ibb.co/6HXL6q1/Privacy-policy-rafiki.png" class="image" alt="Security image" />
                </div>
            </div>
        </div>

        <style>
            .error-message,
            .success-message {
                padding: 10px;
                border-radius: 5px;
                margin-bottom: 15px;
                font-size: 14px;
            }

            .error-message {
                background-color: #ffe6e6;
                border: 1px solid #ff4757;
            }

            .success-message {
                background-color: #e6ffe6;
                border: 1px solid #2ed573;
            }
        </style>

        <%- include('../includes/footer') %>